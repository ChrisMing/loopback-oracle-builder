#!/usr/bin/make -f

DESTDIR=$$(pwd)/debian/strongloop-node-oracle
TEMP_BUILD_DIR=$$(pwd)/../..
NODE_MODULES_DIR=/usr/lib/node
ORA_IC_DIR=/opt/strongloop/instantclient
TEMP_BUILD_NODE_MODULES_DIR=$(TEMP_BUILD_DIR)/install/node_modules
TEMP_BUILD_IC_DIR=$(TEMP_BUILD_DIR)/instantclient-basiclite/instantclient_11_2
CP=$$(which cp)
MKDIR=$$(which mkdir)

%:
	dh $@

override_dh_auto_install:
	# $(MAKE) DESTDIR=$(DESTDIR) prefix=/usr install
	$(MKDIR) -m 0755 -p $(DESTDIR)/$(NODE_MODULES_DIR)
	$(CP) -r $(TEMP_BUILD_NODE_MODULES_DIR)/* $(DESTDIR)/$(NODE_MODULES_DIR)
	$(MKDIR) -m 0755 -p $(DESTDIR)/$(ORA_IC_DIR)
	$(CP) -r $(TEMP_BUILD_IC_DIR)/* $(DESTDIR)/$(ORA_IC_DIR)

